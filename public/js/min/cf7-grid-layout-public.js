var ccs2t,cchddt,cf7sgCustomSelect2Templates=cf7sgCustomSelect2Templates||{},cf7sgCustomHybridddTemplates=cf7sgCustomHybridddTemplates||{};!function($){"use strict";var a=[],b=[],c={};$.fn.cf7sgWarning=function(d,a){var b=$(this);if(!b.is(":input"))return b;f(a)&&(a=0);var c=$('<span class="cf7sg-validation-warning">'+d+'<span class="confirm-button">ok</span></span>');b.after(c),a>0&&c.delay(a).fadeOut("slow",function(){b.remove()})},$(document).ready(function(){$("form.wpcf7-form").on("click",".confirm-button",function(b){var a=$(b.target);a.is(".cf7sg-validation-warning .confirm-button")&&a.parent().remove()}).each(function(){var a=$(this),b=a.closest("div.cf7-smart-grid").attr("id");a.attr("id","wpcf7-"+b)});var a=$("div.cf7-smart-grid.has-table form.wpcf7-form");a.length&&($(".container.cf7-sg-table",a).each(function(){var b=$(this),h=b.closest("div.cf7-smart-grid").attr("id");if(b[0].hasAttribute("id")){var g=$('<input class="cf7sg-tracker-field" value="1" type="hidden">').attr("name",b.attr("id"));b.prepend(g)}var c=$(".row.cf7-sg-table",b),d="Add Row";switch(!0){case b[0].hasAttribute("data-button"):d=b.data("button");break;case c[0].hasAttribute("data-button"):d=c.data("button")}c.find(":input").each(function(){var b=$(this),a=b.attr("name").replace("[]","");a.length>0&&b.addClass("cf7sg-"+a+" cf7sgrow-field"),e(cf7sg[h],["prefill",a])||(b.prefillCF7Field(cf7sg[h].prefill[a],h),delete cf7sg[h].prefill[a])});var f=b.next(".container.cf7-sg-table-footer");f.length>0?(f.detach(),b.after(f),f.after('<div class="cf7-sg-table-button"><a href="javascript:void(0);" class="ui-button">'+d+"</a></div>")):b.after('<div class="cf7-sg-table-button"><a href="javascript:void(0);" class="ui-button">'+d+"</a></div>"),c.attr("data-row","0"),(c=c.clone().addClass("cf7-sg-cloned-table-row")).attr("data-row","-1"),b.append(c.hide()),$(":input",c).each(function(){var a=$(this).prop("disabled",!0),b="_cf7sgcloned_"+a.attr("name");a.attr("name",b)}),c.append('<span class="row-control"><span class="dashicons dashicons-no-alt"></span></span>'),a.on("cf7SmartGridReady",function(a){b.trigger({type:"sgTableReady","table-id":b.attr("id")})})}),a.click(".container",function(c){var a=$(c.target);if(a.is("div.cf7-sg-table-button a")){if((a=a.parent()).hasClass("disabled"))return;var b=a.prev(".container");b.is(".cf7-sg-table-footer")&&(b=b.prev(".container")),b.cf7sgCloneRow(!0,c.target)}else a.is(".cf7-sg-table .row-control .dashicons")&&a.closest(".container").cf7sgRemoveRow()})),(a=$("div.cf7-smart-grid.has-validation form.wpcf7-form")).length&&($('input[type="number"][class*="sgv-"]',a).each(function(){var a=$(this),c=a.attr("name"),b=a.closest("div.cf7-smart-grid").attr("id"),d=a.attr("value");e(cf7sg[b],["prefill",c])||(a.prefillCF7Field(cf7sg[b].prefill[c],b),d=cf7sg[b].prefill[c],delete cf7sg[b].prefill[c]),a.data("current",d)}),a.change('input[type="number"]',function(d){if($(d.target).is('input[type="number"]')){var a=$(d.target),c=a.data("current"),b=!1;switch(!0){case 0==a.val()&&a.is(".sgv-no-zero"):a.after('<span class="cf7sg-validation-warning">Value cannot be zero</span>'),a.val(c),b=!0;break;case 0>a.val()&&a.is(".sgv-no-negative"):a.after('<span class="cf7sg-validation-warning">Value cannot be negative</span>'),a.val(c),b=!0;break;case""==a.val()&&a.hasClass("sgv-not-empty"):a.after('<span class="cf7sg-validation-warning">Value cannot be empty</span>'),a.val(c),b=!0}b&&a.next("span.cf7sg-validation-warning").delay(3e3).fadeOut("slow").remove()}}));var a=$("div.cf7-smart-grid.has-accordion form.wpcf7-form");a.length>0&&(a.filter("div.has-toggles form.wpcf7-form").each(function(){var a=$(this),c=$(".cf7sg-collapsible.with-toggle",a),d="",b=$('input[name="_cf7sg_toggles"]',a),f=!1,h={};b.length>0&&(d=b.val().length>0?JSON.parse(b.val()):{},f=!0),$.fn.trackToggle=function(g){if(!f)return!1;var c=$(this),a=c.attr("id");if(!c.is(".with-toggle"))return!1;if(g){var e=$(".cf7sg-collapsible-title",c).clone(),h=e.children(".toggle").data("on");e.children(".toggle").remove(),d[a]=e.text().trim()+"|"+h}else d.hasOwnProperty(a)&&delete d[a];void 0!==a&&b.length>0&&b.val(JSON.stringify(d))},a.on("click",".cf7sg-collapsible.with-toggle",function(f){var b,c=$(f.target);if(c.is("span.cf7sg-title.toggled")||c.is(".toggle-on")||c.is(".toggle-off")||c.is(".toggle"))b=c.closest(".cf7sg-collapsible-title");else{if(!c.parent().is(".cf7sg-collapsible.with-toggle"))return;b=c}if($(".toggle",b).is(".disabled"))return!1;var d=b.closest(".container.cf7sg-collapsible"),j=d.attr("id"),g=b.parent().removeClass("collapsed").data("group");g&&$('.cf7sg-collapsible.with-toggle[data-group="'+g+'"]',a).each(function(){var a=$(this),b=$(".toggle",a);if(j===a.attr("id")){h[g]&&b.toggleClass("disabled",!0);return}0===a.accordion("option","active")&&(a.addClass("collapsed"),b.toggleClass("disabled",!1).data("toggles").toggle(!1),a.accordion("option","active",!1),$(".row.ui-accordion-content :input",a).prop("disabled",!0),a.trackToggle(!1))});var e=b.children(".toggle").data("toggles");if(void 0===e&&cf7sg.debug&&(console.log("undefined toggleSwitch, header parent:"),console.log(b),console.log("e.target:"),console.log(f.target)),b.hasClass("ui-state-active")){e.toggle(!0);var i=$(".row.ui-accordion-content :input",b.parent()).not(".cf7-sg-cloned-table-row :input").not(".collapsed :input").prop("disabled",!1);a.is(".has-nice-select form")&&i.filter(".wpcf7-form-control.nice-select:enabled").niceSelect(),d.trackToggle(!0)}else e.toggle(!1),$(".row.ui-accordion-content :input",b.parent()).each(function(){var a=this.value;$(this).val(a.trim()).prop("disabled",!0)}),d.trackToggle(!1)}),c.each(function(){var b=$(this),i=b.attr("id");void 0===i&&(i=g(6),b.attr("id",i));var d=b.data("open"),c=b.data("group"),f=!1;c&& void 0===h[c]&&(h[c]=!1),void 0===d?d=!1:!0===d&&(d=0,f=!0);var j=0==a.closest("div.cf7_2_post").length&&!f,k=b.closest("div.cf7-smart-grid").attr("id");$(":input",b.children(".row")).each(function(){var a=$(this),b=a.attr("name").replace("[]","");e(cf7sg[k],["prefill","_cf7sg_toggles",i])||(a.prefillCF7Field(cf7sg[k].prefill[b],k),d=0,f=!0,delete cf7sg[k].prefill[b]),j&&a.prop("disabled",!0)}),f||b.addClass("collapsed"),b.children(".cf7sg-collapsible-title").children(".toggle").setupToggle(f,c),f&&(b.trackToggle(!0),c&&(h[c]=!0)),$("#"+i).accordion({collapsible:!0,icons:!1,active:d,header:"> div.cf7sg-collapsible-title",heightStyle:"content",activate:function(a,b){$(this).trigger("sgContentIncrease")},beforeActivate:function(b,a){if($(".toggle",a.oldHeader).is(".disabled"))return!1},create:function(a){$(this).trigger({type:"sgCollapsibleRowsReady","section-id":i})}})}),c.on("sgContentIncrease",function(){$(this).accordion("refresh")})}),a.each(function(){var a=$(this),b=$(".cf7sg-collapsible",a).not(".cf7sg-collapsible.with-toggle").not(".cf7sg-accordion-rows > .cf7sg-collapsible").not(".cf7sg-slider-section >.cf7sg-collapsible");(b=b.add($(".cf7sg-accordion-rows",a))).each(function(){var a=$(this),c=a.attr("id");void 0===c&&(c=g(6),a.attr("id",c));var b=a.data("open");void 0===b?b=!1:!0===b&&(b=0);var d={heightStyle:"content",create:function(a){$(this).trigger({type:"sgCollapsibleRowsReady","section-id":c})}};a.is(".cf7sg-accordion-rows")?(a.children(".cf7sg-collapsible").children(".cf7sg-collapsible-title").addClass("accordion"),Object.assign(d,{header:"div.cf7sg-collapsible-title.accordion",animate:!1})):Object.assign(d,{collapsible:!0,active:b,header:"> div.cf7sg-collapsible-title",activate:function(a,b){$(this).trigger("sgContentIncrease")}}),$("#"+c).accordion(d),a.on("sgContentIncrease",function(){$(this).accordion("refresh")})})})),(a=$("div.cf7-smart-grid.has-tabs form.wpcf7-form")).length&&(c={},a.click("ul.ui-tabs-nav li",function(c){var a=$(c.target),b=a.closest(".cf7-sg-tabs");a.is(".cf7sg-close-tab")?b.cf7sgRemoveTab():a.is(".cf7sg-add-tab")&&b.cf7sgCloneTab(!0,!0)}),$(".cf7-sg-tabs",a).each(function(){var a=$(this),h=a.closest("div.cf7-smart-grid").attr("id"),d=a.children(".cf7-sg-tabs-list");if(1==d.children("li").length){d.after('<ul class="cf7sg-add-tab ui-tabs-nav"><li class="ui-state-default ui-corner-top"><a class="cf7sg-add-tab ui-tabs-anchor"><span class="cf7sg-add-tab dashicons dashicons-plus"></span></a></li></ul>');var b=a.children(".cf7-sg-tabs-panel").first(),g=$('<input class="cf7sg-tracker-field" value="1" type="hidden">').attr("name",b.attr("id"));a.prepend(g),b.find(":input").each(function(){var a=$(this);if(a.is(".cf7-sg-table :input")){a.addClass("cf7sgtab-field");return}var b=a.attr("name").replace("[]","");b.length>0&&(a.addClass("cf7sg-"+b+" cf7sgtab-field"),e(cf7sg[h],["prefill",b])||(a.prefillCF7Field(cf7sg[h][b],h),delete cf7sg[h].prefill[b]))});var f=$("<div>").append(b.clone());$(":input",f).prop("disabled",!0),c[b.attr("id")]=f.html()}a.tabs({create:function(a){$(this).trigger("sgTabsReady")}})})),$("div.cf7-smart-grid").each(function(){var b=$(this),a=b.attr("id");e(cf7sg[a],["prefill"])||Object.keys(cf7sg[a].prefill).forEach(function(c){var d=$("."+c+" :input",b);0==d.length&&(d=$(':input[name="'+c+'"]',b)),d.prefillCF7Field(cf7sg[a].prefill[c],a)})}),(a=$("div.cf7-smart-grid.has-nice-select form.wpcf7-form")).length>0&&(a.filter("div.cf7_2_post form.wpcf7-form").each(function(){var a=$(this),b=a.closest("div.cf7_2_post").attr("id");b.length>0&&a.on(b,function(a){$(".cf7sg-dynamic-dropdown.ui-select:enabled",$this).each(function(){$(this).niceSelect()}),$(".wpcf7-form-control.nice-select:enabled",$this).each(function(){$(this).niceSelect()}),$(this).trigger("sgNiceSelect")})}),a.not("div.cf7_2_post form.wpcf7-form").each(function(){var a=$(this);$(".cf7sg-dynamic-dropdown.ui-select:enabled",a).each(function(){$(this).niceSelect()}),$(".wpcf7-form-control.nice-select:enabled",a).each(function(){$(this).niceSelect()}),a.on("cf7SmartGridReady",function(b){a.trigger("sgNiceSelect")})})),(a=$("div.cf7-smart-grid.has-select2 form.wpcf7-form")).length>0&&(a.filter("div.cf7_2_post form.wpcf7-form").each(function(){var a=$(this),b=a.closest("div.cf7_2_post").attr("id");b.length>0&&a.on(b,function(b){var a=$(this);$("select.wpcf7-form-control.select2:enabled",a).each(function(){var a=$(this);a.select2(a.cf7sgSelect2Options())}),a.trigger("sgSelect2")})}),a.not("div.cf7_2_post form.wpcf7-form").each(function(){var a=$(this);$("select.wpcf7-form-control.select2:enabled",a).each(function(){var a=$(this);a.select2(a.cf7sgSelect2Options())}),a.on("cf7SmartGridReady",function(b){a.trigger("sgSelect2")})})),(a=$("div.cf7-smart-grid.has-hybriddd form.wpcf7-form")).length>0&&(a.filter("div.cf7_2_post form.wpcf7-form").each(function(){var a=$(this),b=a.closest("div.cf7_2_post").attr("id");b.length>0&&a.on(b,function(b){$(".cf7sg-dynamic_checkbox",a).each(function(){new HybridDropdown(this,$(this).cf7sgHybridddOptions())})})}),a.not("div.cf7_2_post form.wpcf7-form").each(function(){var a=$(this);$(".cf7sg-dynamic_checkbox",a).each(function(){new HybridDropdown(this,$(this).cf7sgHybridddOptions())})}));var b=document.createElement("input");b.setAttribute("type","date");var d="date"==b.type;function g(a){a||(a=5);for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",d=0;d<a;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b}(a=$("div.cf7-smart-grid.has-date form.wpcf7-form")).length>0&&(a.filter("div.cf7_2_post form.wpcf7-form").each(function(){var a=$(this),b=a.closest("div.cf7_2_post").attr("id");b.length>0&&a.on(b,function(a){$("input.wpcf7-date:enabled",$(this)).each(function(){var a=$(this),b=a.attr("id");void 0===b&&(b=g(6),a.attr("id",b)),d||a.setupDatePicker()}),$("input.wpcf7-text.datepicker:enabled",$(this)).each(function(){var a=$(this),b=a.attr("id");void 0===b&&(b=g(6),a.attr("id",b)),a.setupDatePicker()})})}),a.not("div.cf7_2_post form.wpcf7-form").each(function(){$("input.wpcf7-text.datepicker:enabled",$(this)).each(function(){var a=$(this),b=a.attr("id");void 0===b&&(b=g(6),a.attr("id",b)),a.setupDatePicker()}),$("input.wpcf7-date:enabled",$(this)).each(function(){var a=$(this),b=a.attr("id");void 0===b&&(b=g(6),a.attr("id",b)),d||a.setupDatePicker()})})),(a=$("div.cf7-smart-grid.has-slider form.wpcf7-form")).each(function(){var a=$(this).closest(".cf7-smart-grid").attr("id");$(".cf7sg-slider-section").each(function(){var n,b=$(this).wrapInner('<div class="glider"></div>'),k=$(".glider",b),g=b.closest(".container").next(".cf7sg-slider-controls"),c=$('<span class="slider-control slider-prev"></span>'),e=$('<span class="slider-control slider-next"></span>'),l=!1,d=null,j={arrows:{prev:".slider-prev",next:".slider-next"}};if(g.length>0){c=$(".slider-prev",g),e=$(".slider-next",g);let h=document.createElement("style");h.setAttribute("id",a+"-slider-controls"),h.type="text/css",h.innerText="#"+a+" .cf7sg-slider-controls > .cf7sg-submit-controls {max-width: calc(100% - "+(c.outerWidth()+10)+"px)}",document.head.appendChild(h),(d=$(".cf7sg-submit-controls",g)).length>0&&(l=!0,d.hide())}else if(void 0!==b.data("prev")&&(b.data("prev").length>0?c.text(b.data("prev")).addClass("ui-button"):c.addClass("dashicons dashicons-arrow-left-alt")),void 0!==b.data("next")&&(b.data("next").length>0?e.text(b.data("next")).addClass("ui-button"):e.addClass("dashicons dashicons-arrow-right-alt")),b.append(c).append(e),b.data("submit").length>0){l=!0,d=$('<span><input type="submit" value="'+b.data("submit")+'" class="slider-control wpcf7-form-control wpcf7-submit"></span>'),e.after(d);let o=(d.outerHeight()-16)/2;d.hide().append('<span style="margin:'+o+'px 5px;" class="ajax-loader"></span>')}if(c.hide(),b.data("dots")){c.before('<span class="slider-dots"></span>'),j.dots=".slider-dots";let m=b.data("dots");!0!==m&&(j.labelDots=m.split(","));let f=$("form.wpcf7-form input[type=submit]:not(.cf7_2_post_save)").get(0);if(f){f=window.getComputedStyle(f);let i=document.createElement("style");i.setAttribute("id","cf7sg-slider-dots"),i.type="text/css",i.innerText=".glider-dot:hover, .glider-dot:focus, .glider-dot.active{background:"+f["background-color"]+";color:"+f.color+"}",document.body.appendChild(i)}}k.on("glider-loaded",function(a){b.trigger({type:"sgSliderReady",total:k.find(".glider-slide").length})}).on("glider-slide-visible",function(f){let g=!0;switch(c.show(),e.show(),l&&d.hide(),f.detail.slide){case 0:c.hide(),g=!1;break;case n.slides.length-1:e.hide(),l&&d.show()}g&&cf7sg[a].slider_auto_scroll&&$(window).scrollTop(b.offset().top-35),$(f.target).find(".glider-slide.active").trigger({type:"sgSlideChange",current:f.detail.slide,last:$(f.target).find(".glider-slide").length-1})}),n=new Glider(k[0],j),b.on("sgRowAdded sgRowDeleted",function(a){n.refresh(!0)})})}),$.fn.sgCurrentSlide=function(){var a=$(this);return!!a.is(".cf7sg-slider-section")&&parseInt(a.find(".glider-slide.active").data("gslide"))},$.fn.sgChangeSlide=function(a){var b=$(this);if(!b.is(".cf7sg-slider-section"))return b;var c=Glider($(".glider",b)[0]),d=b.sgCurrentSlide();return f(a)?d<c.slides.length&&c.scrollItem(d+1):a<0?d>0&&c.scrollItem(d-1):(a=parseInt(a))>=0&&a<=c.slides.length&&c.scrollItem(a),b},$("div.cf7_2_post div.cf7-smart-grid.has-toggles form.wpcf7-form").each(function(){var a=$(this),c=a.closest("div.cf7-smart-grid").attr("id"),b=a.closest("div.cf7_2_post").attr("id");b.length>0&&a.on(b,function(a){$(".cf7sg-collapsible.with-toggle",$(this)).each(function(){var a=$(this),b=a.attr("id");e(cf7sg[c],["toggles_status",b])?$(".row.ui-accordion-content :input",a).prop("disabled",!0):a.children(".cf7sg-collapsible-title").trigger("click")})})}),$("div.cf7-smart-grid form.wpcf7-form").addClass("cf7sg-ready").trigger("cf7SmartGridReady"),$("div.cf7-smart-grid").on("wpcf7:invalid wpcf7invalid wpcf7mailsent",".wpcf7",function(b){var e,k=$(b.target);switch(b.type){case"wpcf7mailsent":if(!f(cf7sg[b.delegateTarget.id])&&cf7sg[b.delegateTarget.id].redirect.length>0){var j=$(".cf7_2_post_draft",k);(0==j.length||"false"===j.val())&&window.location.replace(cf7sg[b.delegateTarget.id].redirect)}break;case"wpcf7invalid":case"wpcf7:invalid":if(void 0!==(e=b.detail).apiResponse)for(var l in e=e.apiResponse.invalid_fields){for(var g=$(e[l].into),a=g.parents(".cf7sg-collapsible:not(.glider-slide)"),c=0;c<a.length;c++)$(a[c]).attr("data-cf7sg","error"),$(a[c]).is(".cf7sg-accordion-rows .cf7sg-collapsible")?$(a[c]).closest(".cf7sg-accordion-rows").accordion("option","active",c):a.accordion("option","active",0);if((a=g.closest(".cf7-sg-tabs-panel")).length>0){var m=a.attr("id");a=a.closest(".cf7-sg-tabs");for(var h=$(".cf7-sg-tabs-list",a).children(),d=0;d<h.length;d++)if(m==$(h[d]).attr("aria-controls")){$(h[d]).attr("data-cf7sg","error"),a.tabs("option","active",d);break}}if((a=g.closest(".cf7sg-slider-section")).length>0){var i=g.closest(".glider-slide");i.attr("data-cf7sg","error"),Glider($(".glider",a)[0]).scrollItem(i.data("gslide")),a.data("dots")&&$('.slider-dots button[data-index="'+i.data("gslide")+'"]',a).attr("data-cf7sg","error")}}}}).submit(function(b){var a=$(b.target);$('.cf7-sg-tabs-list li[data-cf7sg="error"]',a).attr("data-cf7sg",""),$('.cf7sg-collapsible[data-cf7sg="error"]',a).attr("data-cf7sg",""),$('.slider-dots button[data-cf7sg="error"]',a).attr("data-cf7sg","")}),$("div.cf7-smart-grid.has-grid .wpcf7-submit").each(function(){var a=$(this),b=a.closest("div.cf7-smart-grid").attr("id");void 0!==cf7sg[b].submit_disabled&&a.after('<span class="cf7sg-popup display-none">'+cf7sg[b].submit_disabled+"</span>").parent().addClass("cf7sg-popup-box")}),$("div.cf7-smart-grid.has-table").on("sgRowAdded",".container.cf7-sg-table",function(d){var c,a,b=$(this),e=b.closest("div.cf7-smart-grid").attr("id");if(void 0!==(c=b.data("max"))&& !1!=c&& --c==d.row){var a=b.data("max-row-msg");a='<span class="max-limit wpcf7-not-valid-tip">'+(a=f(a)?cf7sg[e].max_table_rows:a)+"</span>",b.siblings(".cf7-sg-table-button").addClass("disabled").prepend(a)}}),$("div.cf7-smart-grid.has-table").on("sgRowDeleted",".container.cf7-sg-table",function(c){var a,b=$(this);void 0!==(a=b.data("max"))&& !1!=a&&b.siblings(".cf7-sg-table-button").removeClass("disabled").children(".max-limit").remove()}),$("form.wpcf7-form").each(function(){let a=this;a.querySelectorAll(".wpcf7-response-output").forEach(a=>{a.classList.remove("wpcf7-response-output"),a.classList.add("cf7sg-response-output"),a.innerHTML='<div class="wpcf7-response-output"></div>'}),this.addEventListener("wpcf7submit",function(b){b.detail.apiResponse&&b.detail.apiResponse.message&&a.querySelectorAll(".cf7sg-response-output").forEach(c=>{let a=b.detail.apiResponse.message;if(0==a.indexOf("cf7sg->redirect:"))return location=a.replace("cf7sg->redirect:",""),!1;c.innerHTML=`${a}<div class="wpcf7-response-output"></div>`})})})});var d=function(a){if(!a.id)return a.text;var b=$(a.element);return $('<a href="'+b.data("permalink")+'">'+a.text+"</a>")};function e(c,a){if(f(a)&&(a=[]),f(c))return!0;for(var d=c,b=0;b<a.length;b++){if(f(d[a[b]]))return!0;d=a[b]}return!1}function f(a){return null==a||("number"==typeof a?isNaN(a):!Boolean(a))}$.fn.prefillCF7Field=function(a,g){var b=$(this);if(!b.is(":input"))return!1;$(this);var d=b.attr("name"),c=b[0],e=c.type;if(f(c))return cf7sg.debug&&console.log("CF7SG ERROR: Unable to retrieve form element "+d),b;switch(b.length>0&&(e=b[0].type),e){case"select-multiple":case"select":Array.isArray(a)||(a=[a]),a.forEach(function(a){c.querySelector('option[value="'+a+'"]').selected=!0});break;case"checkbox":case"radio":c=$(c).closest("."+d.replace("[]","")).get(0),Array.isArray(a)||(a=[a]),a.forEach(function(a){c.querySelector('input[value="'+a+'"]').checked=!0});break;default:c.value=a}return b},$.fn.cf7sgSelect2Options=function(){var b=$(this),a={tags:b.is(".tags")},c=b.attr("name").replace("[]","");return b.is(".cf7sg-permalinks")&&(a.templateSelection=d,a.templateResult=d),cf7sgCustomSelect2Templates[c]&&(a=Object.assign(a,cf7sgCustomSelect2Templates[c])),a},$.fn.cf7sgHybridddOptions=function(){if(!this.is(".cf7sg-dynamic_checkbox"))return!1;var a={},b=this.data("field-name");return this.is(".cf7sg-hybriddd")?a.optionLabel=function(a){let b="",d="";if(Array.isArray(a)){b=a[0];for(let c=1;c<a.length;c++)d+=` ${a[c]}`}else b=a;return`<span${d}>${b}</span>`}:this.is(".cf7sg-imagehdd")&&(a.optionLabel=function(a){let c="",d="",e="";if(Array.isArray(a)){c=a[0];for(let b=1;b<a.length;b++)a[b].indexOf("data-thumbnail")> -1?e=a[b].replace("data-thumbnail","src"):d+=` ${a[b]}`}return`<div${d}><img ${e} alt="${c}" /><p>${c}</p></div>`}),cf7sgCustomHybridddTemplates[b]&&(a=Object.assign(a,cf7sgCustomHybridddTemplates[b])),a},$.fn.activateCF7sgCollapsibleSection=function(a){null===a&&(a=!0);var b,c=$(this);if(!c.is(".cf7sg-collapsible"))return!1;switch(b=c.children(".cf7sg-collapsible-title"),!0){case a&&!b.is(".ui-state-active"):case!a&&b.is(".ui-state-active"):b.trigger("click")}return c},$.fn.getCF7field=function(b,a){null===a&&(a={});var c=$(this);if(void 0===b||0==b.length)return cf7sg.debug&&console.log("CF7 Smart-grid ERROR: getCF7field() requires valid field name."),!1;if(!c.is(".wpcf7-form"))return cf7sg.debug&&console.log("CF7 Smart-grid ERROR: getCF7field() using unknown form"),!1;var e=void 0!==a.tab,f=void 0!==a.row,d=[];switch(!0){case e&&a.tab>0&&f&&a.row>0:d=$(':input[name="'+b+"_tab-"+a.tab+"_row-"+a.row+'"]',c);break;case e&&f:d=$(':input[name="'+b+'"]',c);break;case e&&a.tab>0&&f:d=$(':input[name="'+b+"_tab-"+a.tab+'"]',c);break;case e&&a.tab>0:d=$(':input[name*="'+b+"_tab-"+a.tab+'"], :input[name*="'+b+"_tab-"+a.tab+'_row-"]',c);break;case e:d=$(':input[name*="'+b+'_row-"], :input[name="'+b+'"]',c);break;case f&&a.row>0&&e:d=$(':input[name="'+b+"_row-"+a.row+'"]',c);break;case f&&a.row>0:d=$(':input[name="'+b+"_row-"+a.row+'"]',c).add($(':input[name*="'+b+'_tab-"]',c).filter(':input[name$="_row-'+a.row+'"]'));break;case f:d=$(':input[name="'+b+'"], :input[name$="'+b+'_tab-"]',c);break;default:d=$(':input[name*="'+b+'"]',c)}return d.not(".cf7-sg-cloned-table-row :input")},$.fn.setupDatePicker=function(){var a=$(this);if(!a.is(".wpcf7-date:enabled")&&!a.is(".wpcf7-text.datepicker:enabled"))return a;var b="",c="",d=a.attr("min");void 0===d?d=null:b=(d=new Date(d)).getFullYear();var e=a.attr("max");return void 0===e?e=null:c=(e=new Date(e)).getFullYear(),a.datepicker("destroy"),a.datepicker({defaultDate:a.val(),dateFormat:"yy-mm-dd",minDate:d,maxDate:e,changeMonth:!0,changeYear:!0}),b>0&&c>0?a.datepicker("option","yearRange",b+":"+c):b>0?a.datepicker("option","yearRange",b+":c+20"):c>0&&a.datepicker("option","yearRange","c-20:"+c),a},$.fn.toggleCF7sgTableRowAddition=function(b){null===b&&(b=!1);var a=$(this);return!!a.is(".container.cf7-sg-table")&&(b?a.next(".cf7-sg-table-button").show():a.next(".cf7-sg-table-button").hide(),a)},$.fn.toggleCF7sgTableRowDeletion=function(b){null===b&&(b=!1);var a=$(this);return!!a.is(".container.cf7-sg-table")&&(b?$(".row.cf7-sg-table:nth-last-child(2) .row-control",a).removeClass("display-none"):$(".row.cf7-sg-table:nth-last-child(2) .row-control",a).addClass("display-none"),a)},$.fn.cf7sgCountRows=function(){var a=$(this);return!!a.is(".container.cf7-sg-table")&&a.children(".row").not(".cf7-sg-cloned-table-row").length},$.fn.cf7sgRemoveRow=function(){var a=$(this);if(!a.is(".container.cf7-sg-table"))return!1;var b=a.children(".row").not(".cf7-sg-cloned-table-row");if(b.length>1){b.last().remove(),a.trigger("sgRowDeleted");var c=a.children(".cf7sg-tracker-field");c.length&&c.val(b.length-1)}return a},$.fn.cf7sgCloneRow=function(e,h){void 0===e&&(e=!0);var a=$(this),c="";if(a.is(".cf7-sg-table-footer")&&(c=a,a=a.closest(".container.cf7-sg-table")),!a.is(".container.cf7-sg-table"))return a;var d=a.children(".row.cf7-sg-table").length-1,f=$(".cf7-sg-cloned-table-row",a),b=f.clone(),i=a.closest("div.cf7-smart-grid").attr("id");b.removeClass("cf7-sg-cloned-table-row").attr("data-row",d),cf7sg[i].table_labels&&$(".field > label",b).remove(),c.length>0?c.before(b.show()):f.before(b.show()),String.prototype.endsWith||(String.prototype.endsWith=function(c,a){var b=this.toString();("number"!=typeof a||!isFinite(a)||Math.floor(a)!==a||a>b.length)&&(a=b.length),a-=c.length;var d=b.indexOf(c,a);return -1!==d&&d===a}),$(":input",b).each(function(){var a=$(this);a.prop("disabled",!1);var b=a.attr("name").replace("_cf7sgcloned_",""),c="";b.endsWith("[]")&&(b=b.replace("[]",""),c="[]"),a.attr("name",b+"_row-"+d+c),a.closest("span.wpcf7-form-control-wrap").removeClass(b).addClass(b+"_row-"+d),a.is("select.ui-select")&&e&&a.niceSelect(),a.is("select.nice-select")&&e&&a.niceSelect(),a.is("select.select2")&&e&&(a.select2(a.cf7sgSelect2Options()),a.trigger("sgSelect2"))}),$(".cf7sg-dynamic_checkbox",b).each(function(){new HybridDropdown(this,$(this).cf7sgHybridddOptions())}),a.trigger("sgContentIncrease"),a.trigger({type:"sgRowAdded",row:d,button:h});var g=a.children(".cf7sg-tracker-field");return g.length&&g.val(d+1),a},$.fn.toggleCF7sgTabAddition=function(b){null===b&&(b=!1);var a=$(this);return!!a.is("div.cf7-sg-tabs")&&(b?$(".cf7sg-add-tab",a).show():$(".cf7sg-add-tab",a).hide(),a)},$.fn.toggleCF7sgTabDeletion=function(b){null===b&&(b=!1);var a=$(this);return!!a.is("div.cf7-sg-tabs")&&(b?$(".cf7-sg-tabs-list li:last-child .cf7sg-close-tab",a).removeClass("display-none").show():$(".cf7-sg-tabs-list li:last-child .cf7sg-close-tab",a).addClass("display-none").hide(),a)},$.fn.cf7sgCountTabs=function(){var a=$(this);return!!a.is("div.cf7-sg-tabs")&&a.find(".cf7-sg-tabs-list").children("li").length},$.fn.cf7sgRemoveTab=function(){var a=$(this);if(!a.is("div.cf7-sg-tabs"))return!1;var b=a.find(".cf7-sg-tabs-list").children("li");if(b.length>1){var e=b.last().find("a").attr("href");a.find("div"+e).remove(),b.last().remove().is(".ui-state-active")&&a.tabs({active:b.length-2}),a.trigger("sgTabRemoved");var c=b.eq(b.length-2).find(".cf7sg-close-tab:not(.display-none)");c.length>0&&c.show();var d=a.children(".cf7sg-tracker-field");d.length&&d.val(a.children(".cf7-sg-tabs-panel").length)}return a},$.fn.cf7sgCloneTab=function(h,f){null===f&&(f=!1);var a=$(this);if(void 0===h&&(h=!0),!a.is("div.cf7-sg-tabs"))return!1;var e=a.children(".cf7-sg-tabs-list"),g=e.children("li").length+1,i=a.children(".cf7-sg-tabs-panel").first().attr("id"),j=i+"-"+g,d=e.children("li").first().clone();d.find("a").attr("href","#"+j).text(d.text()+" ("+g+")"),d.append('<span class="cf7sg-close-tab dashicons dashicons-no-alt"></span>'),d.removeClass("ui-tabs-active ui-state-active"),e.find("li .cf7sg-close-tab").hide(),e.append(d);var b=$(c[i]);b.attr("id",j),$(":input",b).each(function(){var a=$(this),c=a.is(".cf7-sg-cloned-table-row :input"),b=a.attr("name"),d="";c||a.prop("disabled",!1),b.endsWith("[]")&&(b=b.replace("[]",""),d="[]"),a.attr("name",b+"_tab-"+(g-1)+d),a.closest("span.wpcf7-form-control-wrap").removeClass(b).addClass(b+"_tab-"+(g-1)),!c&&a.is("select.ui-select")&&h&&a.niceSelect(),!c&&a.is("select.nice-select")&&h&&a.niceSelect(),!c&&a.is("select.select2")&&h&&(a.select2(a.cf7sgSelect2Options()),a.trigger("sgSelect2"))}),$(".cf7sg-dynamic_checkbox",b).not(".cf7-sg-cloned-table-row *").each(function(){new HybridDropdown(this,$(this).cf7sgHybridddOptions())}),a.append(b),b.find("ul.ui-tabs-nav li a").each(function(){var a=$(this);j=a.attr("href"),a.attr("href",j+"-"+g),a.closest("ul.ui-tabs-nav").siblings("div"+j).attr("id",j.substring(1)+"-"+g)}),$(".cf7-sg-tabs",b).each(function(){$(this).tabs()}),$(".cf7sg-collapsible.with-toggle",b).each(function(){var a=$(this),f=a.attr("id"),i=f+"_tab-"+(g-1);a.attr("id",i);var c=a.data("group");c&&(c=c+"_tab-"+(g-1),a.attr("data-group",c));var d=a.data("open"),e=!1;void 0===d?d=!1:!0===d&&(d=0,e=!0),$(".toggle",a).setupToggle(e,c),e&&a.trackToggle(!0),!e&&h&&($(".row.ui-accordion-content :input",a).prop("disabled",!0),a.addClass("collapsed")),$(".cf7sg-collapsible",b).accordion({collapsible:!0,icons:!1,active:d,header:"> div.cf7sg-collapsible-title",heightStyle:"content",activate:function(a,b){$(this).trigger("sgContentIncrease")},beforeActivate:function(b,a){if($(".toggle",a.oldHeader).is(".disabled"))return!1},create:function(a){$(this).trigger({type:"sgCollapsibleRowsReady","section-id":f,"tab-index":g-1})}})}),a.tabs("refresh"),f&&a.tabs("option","active",-1),b.trigger({type:"sgTabAdded","tab-index":g-1}),$(".cf7-sg-table.container",b).each(function(){var a=$(this),b=a.attr("id");a.attr("id",b+"_tab-"+(g-1)),a.trigger({type:"sgTableReady","table-id":b,"tab-index":g-1})});var k=a.children(".cf7sg-tracker-field");return k.length>0&&k.val(a.children(".cf7-sg-tabs-panel").length),a},$.fn.setupToggle=function(b,e){var a=$(this);if(void 0===b&&(b=!1),!a.is(".toggle"))return a;if(a.length>0){var c=a.data("on");0==c.length&&(c="Yes");var d=a.data("off");0==c.length&&(d="No"),a.toggles({drag:!1,text:{on:c,off:d},on:b}),e&&b&&a.toggleClass("disabled",!0)}return a},$("div.cf7-smart-grid.has-update form.wpcf7-form").on("cf7SmartGridReady",function(){var c=$(this);$.ajax({type:"POST",url:cf7sg.url,dataType:"json",data:{action:"save_grid_fields",nonce:$('input[name="_wpnonce"]',c).val(),tabs_fields:JSON.stringify(a),table_fields:JSON.stringify(b),id:$('input[name="_wpcf7"]',c).val()}}).fail(function(b,a){console.log("CF7 Smart Grid ERROR sending grid fields to server: "+a)})})}(jQuery)